from flask import Flask, request, jsonify

app = Flask(_name_)

# In-memory storage for users (replace with a database in production)
users = []

# Register endpoint
@app.route('/register', methods=['POST'])
def register():
    data = request.json
    name = data.get('name')
    email = data.get('email')
    username = data.get('username')
    password = data.get('password')
    confirm_password = data.get('confirmPassword')

    # Check if passwords match
    if password != confirm_password:
        return jsonify({"message": "Passwords do not match!"}), 400

    # Check if username already exists
    if any(user['username'] == username for user in users):
        return jsonify({"message": "Username already exists!"}), 400

    # Add new user to the list
    new_user = {
        "name": name,
        "email": email,
        "username": username,
        "password": password
    }
    users.append(new_user)

    return jsonify({"message": "Registration successful!"}), 201


# Login endpoint
@app.route('/login', methods=['POST'])
def login():
    data = request.json
    username = data.get('username')
    password = data.get('password')

    # Check if user exists and credentials match
    user = next((user for user in users if user['username'] == username and user['password'] == password), None)

    if user:
        return jsonify({"message": "Login successful!"}), 200
    else:
        return jsonify({"message": "Invalid username or password."}), 401


# Run the Flask app
if _name_ == '_main_':
    app.run(debug=True)
